# espanso-llm - LLM Inline Assistant triggers
#
# Triggers:
#   :llm:  - Quick query without tools (simple mode)
#   :llmc: - Query with clipboard as context (simple mode)
#   :@:    - Full assistant with tools enabled
#   :@c:   - Full assistant with clipboard as context
#
# Triggers use colon syntax without word boundary matching
# for more reliable activation.

matches:
  # :llm: - Simple mode (no tools, quick answers)
  - trigger: ":llm:"
    word: false
    replace: "{{output}}"
    vars:
      - name: form1
        type: form
        params:
          layout: "LLM Query (simple mode):\n[[query]]"
          fields:
            query:
              multiline: true
      - name: output
        type: script
        params:
          args:
            - python3
            - "%CONFIG%/match/packages/espanso-llm/llm-query.py"
            - "--mode"
            - "simple"
            - "{{form1.query}}"

  # :llmc: - Simple mode with clipboard context
  - trigger: ":llmc:"
    word: false
    replace: "{{output}}"
    vars:
      - name: clip
        type: clipboard
      - name: form1
        type: form
        params:
          layout: "Clipboard content will be included as context.\n\nLLM Query (simple mode):\n[[query]]"
          fields:
            query:
              multiline: true
      - name: output
        type: script
        params:
          args:
            - python3
            - "%CONFIG%/match/packages/espanso-llm/llm-query.py"
            - "--mode"
            - "simple"
            - "Context from clipboard:\n{{clip}}\n\nUser request: {{form1.query}}"

  # :@: - Assistant mode (with tools)
  - trigger: ":@:"
    word: false
    replace: "{{output}}"
    vars:
      - name: form1
        type: form
        params:
          layout: "LLM Query (inline-assistant mode):\n[[query]]"
          fields:
            query:
              multiline: true
      - name: output
        type: script
        params:
          args:
            - python3
            - "%CONFIG%/match/packages/espanso-llm/llm-query.py"
            - "--mode"
            - "assistant"
            - "{{form1.query}}"

  # :@c: - Assistant mode with clipboard context
  - trigger: ":@c:"
    word: false
    replace: "{{output}}"
    vars:
      - name: clip
        type: clipboard
      - name: form1
        type: form
        params:
          layout: "Clipboard content will be included as context.\n\nLLM Query (inline-assistant mode):\n[[query]]"
          fields:
            query:
              multiline: true
      - name: output
        type: script
        params:
          args:
            - python3
            - "%CONFIG%/match/packages/espanso-llm/llm-query.py"
            - "--mode"
            - "assistant"
            - "Context from clipboard:\n{{clip}}\n\nUser request: {{form1.query}}"
