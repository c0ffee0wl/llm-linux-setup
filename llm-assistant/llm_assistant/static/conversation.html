<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>llm-guiassistant</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <link rel="stylesheet" href="/static/style.css?v=28">
    <script src="/static/marked.min.js"></script>
    <script src="/static/highlight.min.js"></script>
    <script src="/static/purify.min.js"></script>
    <script src="/static/mermaid.min.js"></script>
</head>
<body>
    <div id="app-container">
        <!-- History Sidebar -->
        <aside id="history-sidebar" class="collapsed">
            <div class="sidebar-tabs">
                <button class="sidebar-tab active" data-tab="history">History</button>
                <button class="sidebar-tab" data-tab="rag">RAG</button>
            </div>
            <div id="history-panel" class="sidebar-panel active">
                <input type="text" id="history-search" placeholder="Search assistant responses..." class="sidebar-search">
                <div id="history-list"></div>
            </div>
            <div id="rag-panel" class="sidebar-panel">
                <div class="rag-panel-content">
                    <div class="rag-new-collection">
                        <input type="text" id="rag-new-name" placeholder="New collection name...">
                        <button id="rag-create-btn" title="Create collection">+</button>
                    </div>
                    <div id="rag-collections"></div>
                </div>
                <div class="rag-panel-bottom">
                    <div class="rag-add-section">
                        <input type="text" id="rag-add-input" placeholder="Path, URL, or git:...">
                        <button id="rag-add-btn" title="Add to collection">+</button>
                    </div>
                    <div class="rag-hint">
                        <strong>Supported formats:</strong><br>
                        • Files: /path/to/file.pdf<br>
                        • Directory: /path/to/dir/<br>
                        • Glob: /path/**/*.md<br>
                        • URL: https://example.com/doc<br>
                        • Recursive: https://.../**<br>
                        • Git: git:https://github.com/...
                    </div>
                    <label class="rag-show-sources" title="Include source citations in RAG and web search results">
                        <input type="checkbox" id="rag-show-sources-checkbox" checked>
                        <span>Show sources in responses</span>
                    </label>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main id="main-content">
            <!-- Header Bar -->
            <header id="header-bar">
                <button id="sidebar-toggle" class="header-btn" title="Toggle sidebar">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2"></rect>
                        <line x1="9" y1="3" x2="9" y2="21"></line>
                    </svg>
                </button>
                <button id="new-conversation-btn-header" class="header-btn" title="New conversation">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                        <line x1="12" y1="8" x2="12" y2="14"></line>
                        <line x1="9" y1="11" x2="15" y2="11"></line>
                    </svg>
                </button>
                <div id="model-picker">
                    <select id="model-select" title="Select model">
                        <option value="">Loading...</option>
                    </select>
                </div>
                <label id="temp-chat-toggle" class="toggle-label" title="Disable logging for this conversation (only available before first message)">
                    <input type="checkbox" id="temp-chat-checkbox">
                    <span class="toggle-text">Temporary chat</span>
                </label>
                <div class="header-spacer"></div>
            </header>

            <div id="conversation">
                <div class="empty-state" id="empty-state">
                    <h2>How can I help you today?</h2>
                    <p>Type a question below and press Enter to send.</p>
                </div>
            </div>

            <div id="input-area">
                <div id="input-controls">
                    <div id="capture-wrapper">
                        <button id="capture-btn" class="control-btn" title="Capture screenshot">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                                <polyline points="21 15 16 10 5 21"></polyline>
                            </svg>
                        </button>
                        <div id="capture-dropdown" class="dropdown hidden">
                            <div class="capture-modes">
                                <button class="capture-mode" data-mode="window">Window</button>
                                <button class="capture-mode" data-mode="region">Region</button>
                                <button class="capture-mode" data-mode="full">Full Screen</button>
                                <button class="capture-mode" data-mode="annotate">Annotate</button>
                            </div>
                            <div class="capture-delay">
                                <label>Delay:</label>
                                <input type="number" id="capture-delay-input" min="0" max="60" value="3">
                                <input type="range" id="capture-delay-slider" min="0" max="60" value="3">
                                <span id="capture-delay-label">3s</span>
                            </div>
                        </div>
                    </div>
                    <button id="at-btn" class="control-btn" title="Insert @ reference">@</button>
                    <div id="attachment-wrapper">
                        <button id="attachment-btn" class="control-btn hidden" title="View attachments">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48"></path>
                            </svg>
                            <span id="attachment-count" class="badge"></span>
                        </button>
                        <div id="attachment-panel" class="dropdown hidden">
                            <div id="attachment-list"></div>
                        </div>
                    </div>
                </div>
                <div id="input-container">
                    <textarea id="input" placeholder="Ask a question..." rows="1"></textarea>
                    <button id="send-btn" title="Send (Ctrl+Enter)">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="22" y1="2" x2="11" y2="13"></line>
                            <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- @ Autocomplete Dropdown -->
            <div id="at-autocomplete" class="dropdown hidden">
                <div id="at-autocomplete-list"></div>
            </div>
            <div id="toast"></div>
        </main>
    </div>

    <!-- Action Panel (Ctrl+K) -->
    <div id="action-panel" class="hidden">
        <div class="action-panel-backdrop"></div>
        <div class="action-panel-content">
            <input type="text" id="action-search" placeholder="Search actions...">
            <div id="action-list"></div>
        </div>
    </div>

    <script src="/static/app.js?v=36"></script>
</body>
</html>
